(this.webpackJsonptodoist=this.webpackJsonptodoist||[]).push([[0],{24:function(e,t,a){},25:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(18),s=(a(24),a(4)),d=(a(25),a(6)),r=a(8),o=a.n(r),i=a(19),j=(a(30),i.a.initializeApp({apiKey:"AIzaSyBg-p0jZJ5tDdjHiGjTYA8bjNGGgRxO3r0",authDomain:"todoist-88c60.firebaseapp.com",projectId:"todoist-88c60",storageBucket:"todoist-88c60.appspot.com",messagingSenderId:"694053797641",appId:"1:694053797641:web:6efb5a277d5dfaf6a79dd8",measurementId:"G-LJ6703WHWX"})),l=a(15),b=[{key:"INBOX",name:"Inbox"},{key:"TODAY",name:"Today"},{key:"NEXT_7",name:"Next 7 Days"}],u=function(e){return b.find((function(t){return t.key===e}))},O=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=[];return function(){for(var a=(new Date).getTime(),c=new Array(8),n=7;n>=0;n--)c[n]=e.charAt(a%64),a=Math.floor(a/64);var s=c.join("");for(n=0;n<12;n++)s+=e.charAt(t[n]);return s}}(),h=a(1),x=Object(c.createContext)(),k=function(e){var t=e.children,a=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){j.firestore().collection("projects").where("userId","==","jlIFXIwyAL3tzHMtzRbw").orderBy("projectId").get().then((function(e){var t=e.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{docId:e.id})}));JSON.stringify(t)!==JSON.stringify(a)&&n(t)}))}),[a]),{projects:a,setProjects:n}}(),n=a.projects,d=a.setProjects;return Object(h.jsx)(x.Provider,{value:{projects:n,setProjects:d},children:t})},p=function(){return Object(c.useContext)(x)},f=Object(c.createContext)(),m=function(e){var t=e.children,a=Object(c.useState)("INBOX"),n=Object(s.a)(a,2),d=n[0],r=n[1];return Object(h.jsx)(f.Provider,{value:{selectedProject:d,setSelectedProject:r},children:t})},v=function(){return Object(c.useContext)(f)},y=function(e){var t=e.setProject,a=e.showProjectOverlay,c=e.setShowProjectOverlay,n=p().projects;return n&&a&&Object(h.jsx)("div",{className:"project-overlay","data-testid":"project-overlay",children:Object(h.jsx)("ul",{className:"project-overlay__list",children:n.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)("div",{"data-testid":"project-overlay-action",onClick:function(){t(e.projectId),c(!1)},onKeyDown:function(a){"Enter"===a.key&&(t(e.projectId),c(!1))},role:"button",tabIndex:0,"aria-label":"Select the task project",children:e.name})},e.projectId)}))})})},_=function(e){var t=e.setTaskDate,a=e.showTaskDate,c=e.setShowTaskDate;return a&&Object(h.jsx)("div",{className:"task-date","data-testid":"task-date-overlay",children:Object(h.jsxs)("ul",{className:"task-date__list",children:[Object(h.jsx)("li",{children:Object(h.jsxs)("div",{onClick:function(){c(!1),t(o()().format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(c(!1),t(o()().format("DD/MM/YYYY")))},"data-testid":"task-date-today",tabIndex:0,"aria-label":"Select today as the task date",role:"button",children:[Object(h.jsx)("span",{children:Object(h.jsx)(d.h,{})}),Object(h.jsx)("span",{children:"Today"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("div",{onClick:function(){c(!1),t(o()().add(1,"day").format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(c(!1),t(o()().add(1,"day").format("DD/MM/YYYY")))},"data-testid":"task-date-tomorrow",role:"button",tabIndex:0,"aria-label":"Select tomorrow as the task date",children:[Object(h.jsx)("span",{children:Object(h.jsx)(d.i,{})}),Object(h.jsx)("span",{children:"Tomorrow"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("div",{onClick:function(){c(!1),t(o()().add(7,"days").format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(c(!1),t(o()().add(7,"days").format("DD/MM/YYYY")))},"data-testid":"task-date-next-week","aria-label":"Select next week as the task date",tabIndex:0,role:"button",children:[Object(h.jsx)("span",{children:Object(h.jsx)(d.g,{})}),Object(h.jsx)("span",{children:"Next week"})]})})]})})},N=function(e){var t=e.showAddTaskMain,a=void 0===t||t,n=(e.showShouldMain,e.showQuickAddTask),r=e.setShowQuickAddTask,i=Object(c.useState)(""),l=Object(s.a)(i,2),b=l[0],u=l[1],O=Object(c.useState)(""),x=Object(s.a)(O,2),k=x[0],p=x[1],f=Object(c.useState)(""),m=Object(s.a)(f,2),N=m[0],w=m[1],I=Object(c.useState)(!1),D=Object(s.a)(I,2),S=D[0],Y=D[1],C=Object(c.useState)(!1),M=Object(s.a)(C,2),T=M[0],g=M[1],A=Object(c.useState)(!1),E=Object(s.a)(A,2),P=E[0],X=E[1],K=v().selectedProject,z=function(){var e=N||K,t="";return"TODAY"===e?t=o()().format("DD/MM/YYYY"):"NEXT_7"===e&&(t=o()().add(7,"days").format("DD/MM/YYYY")),b&&e&&j.firestore().collection("tasks").add({archived:!1,projectId:e,task:b,date:t||k,userId:"jlIFXIwyAL3tzHMtzRbw"}).then((function(){u(""),w(""),Y(""),g(!1)}))};return Object(h.jsxs)("div",{className:n?"add-task add-task__overlay":"add-task","data-testid":"add-task-comp",children:[a&&Object(h.jsxs)("div",{className:"add-task__shallow","data-testid":"show-main-action",onClick:function(){return Y(!S)},children:[Object(h.jsx)("span",{className:"add-task__plus",children:"+"}),Object(h.jsx)("span",{className:"add-task__text",children:"Add Task"})]}),(S||n)&&Object(h.jsxs)("div",{className:"add-task__main","data-testid":"add-task-main",children:[n&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{"data-testid":"quick-add-task",children:[Object(h.jsx)("h2",{className:"header",children:"Quick Add Task"}),Object(h.jsx)("span",{className:"add-task__cancel-x","data-testid":"add-task-quick-cancel","aria-label":"Cancel adding task",onClick:function(){Y(!1),g(!1),r(!1)},children:"X"})]})}),Object(h.jsx)(y,{setProject:w,showProjectOverlay:T,setShowProjectOverlay:g}),Object(h.jsx)(_,{setTaskDate:p,showTaskDate:P,setShowTaskDate:X}),Object(h.jsx)("input",{className:"add-task__content","aria-label":"Enter your task","data-testid":"add-task-content",type:"text",value:b,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("button",{type:"button",className:"add-task__submit","data-testid":"add-task",onClick:function(){return n?z()&&r(!1):z()},children:"Add Task"}),!n&&Object(h.jsx)("span",{className:"add-task__cancel","data-testid":"add-task-main-cancel",onClick:function(){Y(!1),g(!1)},onKeyDown:function(e){"Enter"===e.key&&(Y(!1),g(!1))},"aria-label":"Cancel adding a task",tabIndex:0,role:"button",children:"Cancel"}),Object(h.jsx)("span",{className:"add-task__project","data-testid":"show-project-overlay",onClick:function(){return g(!T)},onKeyDown:function(e){"Enter"===e.key&&g(!T)},tabIndex:0,role:"button",children:Object(h.jsx)(d.f,{})}),Object(h.jsx)("span",{className:"add-task__date","data-testid":"show-task-date-overlay",onClick:function(){return X(!P)},onKeyDown:function(e){"Enter"===e.key&&X(!P)},tabIndex:0,role:"button",children:Object(h.jsx)(d.e,{})})]})]})},w=function(e){var t=e.darkMode,a=e.setDarkMode,n=Object(c.useState)(!1),r=Object(s.a)(n,2),o=r[0],i=r[1],j=Object(c.useState)(!1),l=Object(s.a)(j,2),b=l[0],u=l[1];return Object(h.jsxs)("header",{className:"header","data-testid":"header",children:[Object(h.jsxs)("nav",{children:[Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)("img",{src:"/images/logo.png",alt:"TodoList"})}),Object(h.jsx)("div",{className:"settings",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{className:"settings__add",children:Object(h.jsx)("button",{"data-testid":"quick-add-task-action",onClick:function(){u(!0),i(!0)},children:"+"})}),Object(h.jsx)("li",{"data-testid":"dark-mode-action",className:"settings__darkmode",onClick:function(){return a(!t)},children:Object(h.jsx)(d.c,{})})]})})]}),Object(h.jsx)(N,{showAddTaskMain:!1,shouldShowMain:o,showQuickAddTask:b,setShowQuickAddTask:u})]})},I=a(14),D=function(e){var t=e.project,a=Object(c.useState)(!1),n=Object(s.a)(a,2),r=n[0],o=n[1],i=p(),l=i.projects,b=i.setProjects,u=v().setSelectedProject;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:"sidebar__dot",children:"\u2022"}),Object(h.jsx)("span",{className:"sidebar__project-name",children:t.name}),Object(h.jsxs)("span",{className:"sidebar__project-delete","data-testid":"delete-project",onClick:function(){return o(!r)},children:[Object(h.jsx)(d.j,{}),r&&Object(h.jsx)("div",{className:"project-delete-modal",children:Object(h.jsxs)("div",{className:"project-delete-modal__inner",children:[Object(h.jsx)("p",{children:"Are you sure you want to delete this project?"}),Object(h.jsx)("button",{type:"button",onClick:function(){return e=t.docId,void j.firestore().collection("projects").doc(e).delete().then((function(){b(Object(I.a)(l)),u("INBOX")}));var e},children:"Delete"}),Object(h.jsx)("span",{onClick:function(){return o(!r)},children:"Cancel"})]})})]})]})},S=function(e){var t=e.activeValue,a=void 0===t?null:t,n=Object(c.useState)(a),d=Object(s.a)(n,2),r=d[0],o=d[1],i=v().setSelectedProject,j=p().projects;return j&&j.map((function(e){return Object(h.jsx)("li",{"data-testid":"project-action-parent","data-doc-id":e.docId,className:r===e.projectId?"active sidebar__project":"sidebar__project",children:Object(h.jsx)("div",{role:"button","data-testid":"project-action",tabIndex:0,"aria-label":"Select ".concat(e.name," as the task project"),onClick:function(){o(e.projectId),i(e.projectId)},onKeyDown:function(t){"Enter"===t.key&&(o(e.projectId),i(e.projectId))},children:Object(h.jsx)(D,{project:e})})},e.projectId)}))},Y=function(e){var t=e.shouldShow,a=void 0!==t&&t,n=Object(c.useState)(a),d=Object(s.a)(n,2),r=d[0],o=d[1],i=Object(c.useState)(""),l=Object(s.a)(i,2),b=l[0],u=l[1],x=O(),k=p(),f=k.projects,m=k.setProjects;return Object(h.jsxs)("div",{className:"add-project","data-testid":"add-project",children:[r&&Object(h.jsxs)("div",{className:"add-project__input","data-testid":"add-project-inner",children:[Object(h.jsx)("input",{value:b,onChange:function(e){return u(e.target.value)},className:"add-project__name","data-testid":"project-name",type:"text",placeholder:"Name your project"}),Object(h.jsx)("button",{className:"add-project__submit",type:"button",onClick:function(){return b&&j.firestore().collection("projects").add({projectId:x,name:b,userId:"jlIFXIwyAL3tzHMtzRbw"}).then((function(){m(Object(I.a)(f)),u(""),o(!1)}))},"data-testid":"add-project-submit",children:"Add Project"}),Object(h.jsx)("span",{"aria-label":"Cancel adding project","data-testid":"hide-project-overlay",className:"add-project__cancel",onClick:function(){return o(!1)},onKeyDown:function(e){"Enter"===e.key&&o(!1)},role:"button",tabIndex:0,children:"Cancel"})]}),Object(h.jsx)("span",{className:"add-project__plus",children:"+"}),Object(h.jsx)("span",{"aria-label":"Add Project","data-testid":"add-project-action",className:"add-project__text",onClick:function(){return o(!r)},onKeyDown:function(e){"Enter"===e.key&&o(!r)},role:"button",tabIndex:0,children:"Add Project"})]})},C=function(){var e=v().setSelectedProject,t=Object(c.useState)("inbox"),a=Object(s.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(!0),i=Object(s.a)(o,2),j=i[0],l=i[1];return Object(h.jsxs)("div",{className:"sidebar","data-testid":"sidebar",children:[Object(h.jsxs)("ul",{className:"sidebar__generic",children:[Object(h.jsx)("li",{"data-testid":"inbox",className:"inbox"===n?"active":void 0,children:Object(h.jsx)("div",{"data-testid":"inbox-action","aria-label":"Show inbox tasks",tabIndex:0,role:"button",onClick:function(){r("inbox"),e("INBOX")},onKeyDown:function(t){"Enter"===t.key&&(r("inbox"),e("INBOX"))},children:Object(h.jsxs)("span",{children:[Object(h.jsx)(d.b,{}),"\xa0\xa0 ",Object(h.jsx)("h4",{children:"Inbox"})]})})}),Object(h.jsx)("li",{"data-testid":"today",className:"today"===n?"active":void 0,children:Object(h.jsx)("div",{"data-testid":"today-action","aria-label":"Show today's tasks",tabIndex:0,role:"button",onClick:function(){r("today"),e("TODAY")},onKeyDown:function(t){"Enter"===t.key&&(r("today"),e("TODAY"))},children:Object(h.jsxs)("span",{children:[Object(h.jsx)(d.d,{}),"\xa0\xa0 ",Object(h.jsx)("h4",{children:"Today"})]})})}),Object(h.jsx)("li",{"data-testid":"next_7",className:"next_7"===n?"active":void 0,children:Object(h.jsx)("div",{"data-testid":"next_7-action","aria-label":"Show tasks for the next 7 days",tabIndex:0,role:"button",onClick:function(){r("next_7"),e("NEXT_7")},onKeyDown:function(t){"Enter"===t.key&&(r("next_7"),e("NEXT_7"))},children:Object(h.jsxs)("span",{children:[Object(h.jsx)(d.e,{}),"\xa0\xa0 ",Object(h.jsx)("h4",{children:"Next 7 days"})]})})})]}),Object(h.jsxs)("div",{className:"sidebar__middle","aria-label":"Show/hide projects",onClick:function(){return l(!j)},onKeyDown:function(e){"Enter"===e.key&&l(!j)},role:"button",tabIndex:0,children:[Object(h.jsx)("span",{children:Object(h.jsx)(d.a,{className:j?void 0:"hidden-projects"})}),Object(h.jsx)("h2",{children:"Projects"})]}),Object(h.jsx)("ul",{className:"sidebar__projects",children:j&&Object(h.jsx)(S,{})}),j&&Object(h.jsx)(Y,{})]})},M=function(e){var t=e.id;return Object(h.jsx)("div",{className:"checkbox-holder","data-testid":"checkbox-action",onClick:function(){j.firestore().collection("tasks").doc(t).update({archived:!0})},children:Object(h.jsx)("span",{className:"checkbox"})})},T=function(){var e=v().selectedProject,t=p().projects,a=function(e){var t=Object(c.useState)([]),a=Object(s.a)(t,2),n=a[0],d=a[1],r=Object(c.useState)([]),i=Object(s.a)(r,2),b=i[0],O=i[1];return Object(c.useEffect)((function(){var t=j.firestore().collection("tasks").where("userId","==","jlIFXIwyAL3tzHMtzRbw");return t=(t=e&&!u(e)?t=t.where("projectId","==",e):"TODAY"===e?t=t.where("date","==",o()().format("DD/MM/YYYY")):"INBOX"===e||0===e?t=t.where("date","==",""):t).onSnapshot((function(t){var a=t.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));d("NEXT_7"===e?a.filter((function(e){return o()(e.date,"DD-MM-YYYY").diff(o()(),"days")<=7&&!0!==e.archived})):a.filter((function(e){return!0!==e.archived}))),O(a.filter((function(e){return!1!==e.archived})))})),function(){return t()}}),[e]),{tasks:n,archivedTasks:b}}(e).tasks,n="";return u(e)&&e&&(n=function(e,t){return e.find((function(e){return e.key===t}))}(b,e).name),t&&t.length>0&&e&&!u(e)&&(n=function(e,t){return e.find((function(e){return e.projectId===t}))}(t,e).name),Object(c.useEffect)((function(){document.title="".concat(n,": Todoist")})),Object(h.jsxs)("div",{className:"tasks","data-testid":"tasks",children:[Object(h.jsx)("h2",{"data-testid":"project-name",children:n}),Object(h.jsx)("ul",{className:"tasks__list",children:a.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)(M,{id:e.id,taskDesc:e.task}),Object(h.jsx)("span",{children:e.task})]},"".concat(e.id))}))}),Object(h.jsx)(N,{})]})},g=function(){return Object(h.jsxs)("section",{className:"content",children:[Object(h.jsx)(C,{}),Object(h.jsx)(T,{})]})},A=function(e){var t=e.darkModeDefault,a=void 0!==t&&t,n=Object(c.useState)(a),d=Object(s.a)(n,2),r=d[0],o=d[1];return Object(h.jsx)(m,{children:Object(h.jsx)(k,{children:Object(h.jsxs)("main",{"data-testid":"application",className:r?"darkmode":void 0,children:[Object(h.jsx)(w,{darkMode:r,setDarkMode:o}),Object(h.jsx)(g,{})]})})})};Object(n.render)(Object(h.jsx)(A,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.7da6f820.chunk.js.map