{"ast":null,"code":"import _slicedToArray from\"/home/omkar/webdev/om/todoist/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{FaRegListAlt,FaRegCalendarAlt}from\"react-icons/fa\";import moment from\"moment\";import{firebase}from\"../firebase\";import{useSelectedProjectValue}from\"../context\";import{ProjectOverlay}from\"./ProjectOverlay\";import{TaskDate}from\"./TaskDate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var AddTask=function AddTask(_ref){var _ref$showAddTaskMain=_ref.showAddTaskMain,showAddTaskMain=_ref$showAddTaskMain===void 0?true:_ref$showAddTaskMain,_ref$showShouldMain=_ref.showShouldMain,showShouldMain=_ref$showShouldMain===void 0?false:_ref$showShouldMain,showQuickAddTask=_ref.showQuickAddTask,setShowQuickAddTask=_ref.setShowQuickAddTask;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),task=_useState2[0],setTask=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),taskDate=_useState4[0],setTaskDate=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),project=_useState6[0],setProject=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showMain=_useState8[0],setShowMain=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showProjectOverlay=_useState10[0],setShowProjectOverlay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showTaskDate=_useState12[0],setShowTaskDate=_useState12[1];var _useSelectedProjectVa=useSelectedProjectValue(),selectedProject=_useSelectedProjectVa.selectedProject;var addTask=function addTask(){var projectId=project||selectedProject;var collatedDate=\"\";if(projectId===\"TODAY\"){collatedDate=moment().format(\"DD/MM/YYYY\");}else if(projectId===\"NEXT_7\"){collatedDate=moment().add(7,\"days\").format(\"DD/MM/YYYY\");}return task&&projectId&&firebase.firestore().collection(\"tasks\").add({archived:false,projectId:projectId,task:task,date:collatedDate||taskDate,userId:\"jlIFXIwyAL3tzHMtzRbw\"}).then(function(){setTask(\"\");setProject(\"\");setShowMain(\"\");setShowProjectOverlay(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:showQuickAddTask?\"add-task add-task__overlay\":\"add-task\",\"data-testid\":\"add-task-comp\",children:[showAddTaskMain&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-task__shallow\",\"data-testid\":\"show-main-action\",onClick:function onClick(){return setShowMain(!showMain);},children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-task__plus\",children:\"+\"}),/*#__PURE__*/_jsx(\"span\",{className:\"add-task__text\",children:\"Add Task\"})]}),(showMain||showQuickAddTask)&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-task__main\",\"data-testid\":\"add-task-main\",children:[showQuickAddTask&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"quick-add-task\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"header\",children:\"Quick Add Task\"}),/*#__PURE__*/_jsx(\"span\",{className:\"add-task__cancel-x\",\"data-testid\":\"add-task-quick-cancel\",\"aria-label\":\"Cancel adding task\",onClick:function onClick(){setShowMain(false);setShowProjectOverlay(false);setShowQuickAddTask(false);},children:\"X\"})]})}),/*#__PURE__*/_jsx(ProjectOverlay,{setProject:setProject,showProjectOverlay:showProjectOverlay,setShowProjectOverlay:setShowProjectOverlay}),/*#__PURE__*/_jsx(TaskDate,{setTaskDate:setTaskDate,showTaskDate:showTaskDate,setShowTaskDate:setShowTaskDate}),/*#__PURE__*/_jsx(\"input\",{className:\"add-task__content\",\"aria-label\":\"Enter your task\",\"data-testid\":\"add-task-content\",type:\"text\",value:task,onChange:function onChange(e){return setTask(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-task__submit\",\"data-testid\":\"add-task\",onClick:function onClick(){return showQuickAddTask?addTask()&&setShowQuickAddTask(false):addTask();},children:\"Add Task\"}),!showQuickAddTask&&/*#__PURE__*/_jsx(\"span\",{className:\"add-task__cancel\",\"data-testid\":\"add-task-main-cancel\",onClick:function onClick(){setShowMain(false);setShowProjectOverlay(false);},onKeyDown:function onKeyDown(e){if(e.key===\"Enter\"){setShowMain(false);setShowProjectOverlay(false);}},\"aria-label\":\"Cancel adding a task\",tabIndex:0,role:\"button\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"span\",{className:\"add-task__project\",\"data-testid\":\"show-project-overlay\",onClick:function onClick(){return setShowProjectOverlay(!showProjectOverlay);},onKeyDown:function onKeyDown(e){if(e.key===\"Enter\")setShowProjectOverlay(!showProjectOverlay);},tabIndex:0,role:\"button\",children:/*#__PURE__*/_jsx(FaRegListAlt,{})}),/*#__PURE__*/_jsx(\"span\",{className:\"add-task__date\",\"data-testid\":\"show-task-date-overlay\",onClick:function onClick(){return setShowTaskDate(!showTaskDate);},onKeyDown:function onKeyDown(e){if(e.key===\"Enter\")setShowTaskDate(!showTaskDate);},tabIndex:0,role:\"button\",children:/*#__PURE__*/_jsx(FaRegCalendarAlt,{})})]})]});};","map":{"version":3,"sources":["/home/omkar/webdev/om/todoist/src/components/AddTask.js"],"names":["React","useState","FaRegListAlt","FaRegCalendarAlt","moment","firebase","useSelectedProjectValue","ProjectOverlay","TaskDate","AddTask","showAddTaskMain","showShouldMain","showQuickAddTask","setShowQuickAddTask","task","setTask","taskDate","setTaskDate","project","setProject","showMain","setShowMain","showProjectOverlay","setShowProjectOverlay","showTaskDate","setShowTaskDate","selectedProject","addTask","projectId","collatedDate","format","add","firestore","collection","archived","date","userId","then","e","target","value","key"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { FaRegListAlt, FaRegCalendarAlt } from \"react-icons/fa\";\nimport moment from \"moment\";\nimport { firebase } from \"../firebase\";\nimport { useSelectedProjectValue } from \"../context\";\nimport { ProjectOverlay } from \"./ProjectOverlay\";\nimport { TaskDate } from \"./TaskDate\";\n\nexport const AddTask = ({\n  showAddTaskMain = true,\n  showShouldMain = false,\n  showQuickAddTask,\n  setShowQuickAddTask,\n}) => {\n  const [task, setTask] = useState(\"\");\n  const [taskDate, setTaskDate] = useState(\"\");\n  const [project, setProject] = useState(\"\");\n  const [showMain, setShowMain] = useState(false);\n  const [showProjectOverlay, setShowProjectOverlay] = useState(false);\n  const [showTaskDate, setShowTaskDate] = useState(false);\n  const { selectedProject } = useSelectedProjectValue();\n\n  const addTask = () => {\n    const projectId = project || selectedProject;\n\n    let collatedDate = \"\";\n    if (projectId === \"TODAY\") {\n      collatedDate = moment().format(\"DD/MM/YYYY\");\n    } else if (projectId === \"NEXT_7\") {\n      collatedDate = moment().add(7, \"days\").format(\"DD/MM/YYYY\");\n    }\n\n    return (\n      task &&\n      projectId &&\n      firebase\n        .firestore()\n        .collection(\"tasks\")\n        .add({\n          archived: false,\n          projectId,\n          task,\n          date: collatedDate || taskDate,\n          userId: \"jlIFXIwyAL3tzHMtzRbw\",\n        })\n        .then(() => {\n          setTask(\"\");\n          setProject(\"\");\n          setShowMain(\"\");\n          setShowProjectOverlay(false);\n        })\n    );\n  };\n\n  return (\n    <div\n      className={showQuickAddTask ? \"add-task add-task__overlay\" : \"add-task\"}\n      data-testid=\"add-task-comp\"\n    >\n      {showAddTaskMain && (\n        <div\n          className=\"add-task__shallow\"\n          data-testid=\"show-main-action\"\n          onClick={() => setShowMain(!showMain)}\n        >\n          <span className=\"add-task__plus\">+</span>\n          <span className=\"add-task__text\">Add Task</span>\n        </div>\n      )}\n\n      {(showMain || showQuickAddTask) && (\n        <div className=\"add-task__main\" data-testid=\"add-task-main\">\n          {showQuickAddTask && (\n            <>\n              <div data-testid=\"quick-add-task\">\n                <h2 className=\"header\">Quick Add Task</h2>\n                <span\n                  className=\"add-task__cancel-x\"\n                  data-testid=\"add-task-quick-cancel\"\n                  aria-label=\"Cancel adding task\"\n                  onClick={() => {\n                    setShowMain(false);\n                    setShowProjectOverlay(false);\n                    setShowQuickAddTask(false);\n                  }}\n                >\n                  X\n                </span>\n              </div>\n            </>\n          )}\n          <ProjectOverlay\n            setProject={setProject}\n            showProjectOverlay={showProjectOverlay}\n            setShowProjectOverlay={setShowProjectOverlay}\n          />\n          <TaskDate\n            setTaskDate={setTaskDate}\n            showTaskDate={showTaskDate}\n            setShowTaskDate={setShowTaskDate}\n          />\n          <input\n            className=\"add-task__content\"\n            aria-label=\"Enter your task\"\n            data-testid=\"add-task-content\"\n            type=\"text\"\n            value={task}\n            onChange={(e) => setTask(e.target.value)}\n          />\n\n          <button\n            type=\"button\"\n            className=\"add-task__submit\"\n            data-testid=\"add-task\"\n            onClick={() =>\n              showQuickAddTask\n                ? addTask() && setShowQuickAddTask(false)\n                : addTask()\n            }\n          >\n            Add Task\n          </button>\n          {!showQuickAddTask && (\n            <span\n              className=\"add-task__cancel\"\n              data-testid=\"add-task-main-cancel\"\n              onClick={() => {\n                setShowMain(false);\n                setShowProjectOverlay(false);\n              }}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  setShowMain(false);\n                  setShowProjectOverlay(false);\n                }\n              }}\n              aria-label=\"Cancel adding a task\"\n              tabIndex={0}\n              role=\"button\"\n            >\n              Cancel\n            </span>\n          )}\n          <span\n            className=\"add-task__project\"\n            data-testid=\"show-project-overlay\"\n            onClick={() => setShowProjectOverlay(!showProjectOverlay)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") setShowProjectOverlay(!showProjectOverlay);\n            }}\n            tabIndex={0}\n            role=\"button\"\n          >\n            <FaRegListAlt />\n          </span>\n          <span\n            className=\"add-task__date\"\n            data-testid=\"show-task-date-overlay\"\n            onClick={() => setShowTaskDate(!showTaskDate)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") setShowTaskDate(!showTaskDate);\n            }}\n            tabIndex={0}\n            role=\"button\"\n          >\n            <FaRegCalendarAlt />\n          </span>\n        </div>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}